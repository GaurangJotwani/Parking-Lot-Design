"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77237],{78524:function(a,b,c){var d=c(20348);c(89703);var e=c(90950),f=function(a){var b=a.defaultRedirect,c=a.isRedirectSet,f=a.isLifeTimeAlaCarte,g=a.hasMultipleRedirects,h=a.authorId,i=a.collectionId,j=a.navigateToTransition,k=a.deletionTime,l="".concat(f?"This course is no longer available on our catalog and will not be updated. You can still access the course.":"This course is no longer available on our catalog and won't be accessible after ".concat(k,".")," ").concat(c?"We have ".concat(g?"":"a ","better recommendation").concat(g?"s":""," for you."):"Weâ€™ll soon come up with a better alternative for you.");return(0,d.jsxs)("div",{className:"flex items-center text-center flex-col lg:flex-row",children:[(0,d.jsx)("span",{children:l}),c&&(0,d.jsx)("div",{className:"text-white active:text-white font-bold text-base hover:text-white border border-gray-500 border-solid rounded lg:ml-1 w-max mt-2 lg:mt-0 ml-0 lg:mb-0 mb-2",children:(0,d.jsx)("a",{className:"flex m-0 p-0 justify-center no-underline w-[150px] h-9 focus:text-white",href:j?"".concat((0,e.Dp)(),"/transition/").concat(h,"/").concat(i):b.redirect_url_slug?"".concat((0,e.Dp)(),"/courses/").concat(b.redirect_url_slug):"".concat((0,e.Dp)(),"/collection/").concat(b.author_id,"/").concat(b.collection_id),children:(0,d.jsx)("p",{className:"m-0 p-0 self-center",children:j?"View New Course".concat(g?"s":""):"Visit New Course"})})})]})};b.Z=f},52001:function(a,b,c){c.r(b),c.d(b,{ViewCollectionArticlesPage:function(){return as},ViewCollectionArticlesPageForTest:function(){return au},default:function(){return at}});var d=c(41344),e=c.n(d),f=c(20348),g=c(89703),h=c(31285),i=c.n(h),j=c(25524),k=c(131),l=c(78471),m=c(8654),n=c(57020),o=c(19817),p=c(689),q=c(97725),r=c(39158);function s(){var a,b,c=(a=["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  min-width: 1px;\n  margin-left: 0;\n  transition: margin-left 0.25s ease-out;\n  overflow: hidden;\n  position: relative;\n\n  .b-sticky-panel {\n    position: relative;\n  }\n\n  .b-footer {\n    position: relative;\n    flex: 0 0 auto;\n  }\n"],b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}})));return s=function(){return c},c}var t=r.ZP.div.withConfig({componentId:"sc-90bdb317-0"})(s()),u=function(a){var b=a.children;return(0,f.jsx)(t,{id:"view-collection-article-content-root",children:b})},v=c(72128),w=c(66226),x=c(99959),y=c(67506),z=c(50187),A=c(65279),B=c(31932),C=c(89508),D=c(60958),E=c(73756),F=c(4379),G=c(46757),H=c(39899),I=c(11619),J=c(50109),K=c(2604),L=c(82933),M=c(58910),N=c(18224),O=c(68401),P=c(39637),Q=c(97141),R=c(63806),S=c(99051),T=c(35483),U=c(20018),V=c(94848),W=c(64762),X=c(16429),Y=c(55563);function Z(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function $(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function _(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function aa(a){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function ab(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_(a,b,c[b])})}return a}function ac(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function ad(a,b){return(ad=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var ae=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(63275),c.e(64304),c.e(55032),c.e(57238),c.e(59818),c.e(55587),c.e(97505),c.e(88467),c.e(99667),c.e(96443),c.e(59862),c.e(42089),c.e(79807),c.e(26210),c.e(23406),c.e(85967),c.e(8746),c.e(71056),c.e(32193),c.e(21873),c.e(18165),c.e(39206),c.e(67141),c.e(76713),c.e(50758),c.e(9303),c.e(2944)]).then(c.bind(c,39542))},{loadableGenerated:{webpack:function(){return[39542]}}}),af=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(63275),c.e(59818),c.e(55587),c.e(97505),c.e(26210),c.e(23406),c.e(85967),c.e(8746),c.e(21873),c.e(18165),c.e(39206),c.e(76344),c.e(77670)]).then(c.bind(c,76344))},{loadableGenerated:{webpack:function(){return[76344]}}}),ag=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(63275),c.e(64304),c.e(59818),c.e(55587),c.e(97505),c.e(88467),c.e(99667),c.e(96443),c.e(59862),c.e(42089),c.e(94650),c.e(46988),c.e(26210),c.e(23406),c.e(85967),c.e(8746),c.e(28302),c.e(71056),c.e(32193),c.e(21873),c.e(18165),c.e(73195),c.e(39206),c.e(26633),c.e(76132),c.e(76344),c.e(64989),c.e(46828),c.e(81441)]).then(c.bind(c,46828))},{loadableGenerated:{webpack:function(){return[46828]}}}),ah=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(63275),c.e(64304),c.e(23656),c.e(87491),c.e(59818),c.e(55587),c.e(97505),c.e(88467),c.e(99667),c.e(96443),c.e(59862),c.e(42089),c.e(28517),c.e(22129),c.e(26210),c.e(23406),c.e(85967),c.e(8746),c.e(71056),c.e(32193),c.e(18165),c.e(95996),c.e(24905),c.e(32629),c.e(91588),c.e(66709),c.e(63286),c.e(12827),c.e(71479)]).then(c.bind(c,2752))},{loadableGenerated:{webpack:function(){return[2752]}}}),ai=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(63275),c.e(59818),c.e(55587),c.e(97505),c.e(99667),c.e(26210),c.e(23406),c.e(85967),c.e(8746),c.e(18165),c.e(73195),c.e(50758),c.e(76685)]).then(c.bind(c,91038))},{loadableGenerated:{webpack:function(){return[91038]}}}),aj=i()(function(){return Promise.all([c.e(73195),c.e(98651),c.e(98220),c.e(55930)]).then(c.bind(c,86813))},{loadableGenerated:{webpack:function(){return[86813]}}}),ak=i()(function(){return Promise.all([c.e(9566),c.e(7684),c.e(63275),c.e(64304),c.e(55032),c.e(57238),c.e(59818),c.e(55587),c.e(97505),c.e(88467),c.e(99667),c.e(96443),c.e(59862),c.e(42089),c.e(79807),c.e(26210),c.e(23406),c.e(85967),c.e(8746),c.e(71056),c.e(32193),c.e(21873),c.e(18165),c.e(39206),c.e(67141),c.e(76713),c.e(50758),c.e(9303),c.e(83400)]).then(c.bind(c,23309))},{loadableGenerated:{webpack:function(){return[23309]}}}),al=i()(function(){return c.e(44157).then(c.bind(c,44157))},{loadableGenerated:{webpack:function(){return[44157]}},loading:function(){return(0,f.jsx)("div",{})}}),am=function(a){return[k.j1J.STANDALONE_ASSESSMENT,k.j1J.STANDALONE_PROJECT,].includes(a)},an=function(a,b,c){var d,e,f,g,h=arguments.length>3&& void 0!==arguments[3]&&arguments[3],i={next:null,previous:null},j=(null==a?void 0:null===(d=a.instance)|| void 0===d?void 0:d.details)||{},l=j.author_id,m=j.collection_id,n=(null===(e=j.toc)|| void 0===e?void 0:e.categories)||[],o=(0,z.qp)(l,m,n,[],h).flattenTree,p=o.findIndex(function(a){var c=a.id;return String(b)===c});if(p<0)return null;var q=p===o.length-1,r=j.page_titles,s=o[p+1],t=o[p-1],u=j.is_plan?k.dLO.PLAN:(0,I.Z)(c.asPath);return u===k.dLO.MODULE?(f=String(j.path_author_id),g=String(j.path_id)):(f=String(l),g=String(m)),s&&(i.next=ab(ac(ab({},o[p+1]),{title:r[Number(s.id)]}),(0,z.FW)(o[p+1].type)?{workType:k.dLO.MODULE}:{authorId:l,collectionId:m,workType:u})),t&&(i.previous=ab(ac(ab({},o[p-1]),{title:r[Number(t.id)]}),(0,z.FW)(o[p-1].type)?{workType:k.dLO.MODULE}:{authorId:l,collectionId:m,workType:u})),q&&u===k.dLO.MODULE&&(i.next={authorId:String(j.next_content_author_id),collectionId:String(j.next_content_collection_id),id:String(j.next_content_id),type:j.next_content_type,title:j.next_content_title,workType:(0,z.mz)(j.next_content_type)?k.dLO.PLAN:k.dLO.MODULE}),i.next&&(i.next=ac(ab({},i.next),{pathAuthorId:f,pathId:g})),i.previous&&(i.previous=ac(ab({},i.previous),{pathAuthorId:f,pathId:g})),i},ao=function(a){for(var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0,e=d?a+1:a-1;e<b.length&&e>=0;){if(!b[e])return null;if(null===(f=b[e])|| void 0===f?void 0:f.is_preview){var f,g,h=null===(g=b[e])|| void 0===g?void 0:g.id;if(h)return{id:h,title:c[h],showPreviewLink:!0};return null}d?e++:e--}},ap=function(a,b){var c,d,e,f,g,h,i,j=a.author,k=j.collection,l=j.collectionArticle,m=j.articleSnapshot.properties,n=a.user,p=n.courseCompletion,q=n.userApiKeys,r=n.readerPreferences,s=n.widgetsData,t=n.info,u=a.loader,v=a.userCollectionArticle,w=a.collectionArticlePreview,x=a.widgets,y=a.paths,z=y.pathCompletion,A=y.moduleCategories,B=a.sidebar,C=B.toggle.sidebarCollapsed,D=b.router,E=(0,o.Z)(D.asPath)?l:v,F=null!==(i=null==k?void 0:null===(c=k.instance)|| void 0===c?void 0:null===(d=c.details)|| void 0===d?void 0:d.api_keys)&& void 0!==i?i:[],H=x.ids.map(function(a){return x.entities[a]}),I=G.parseUrl(D.asPath).url;return{collection:k,courseCompletion:p,userApiKeys:q,readerPreferences:r,widgetsData:s,apiKeys:F,loader:u,pageData:E,pageProps:!1===w.loading&& !0===w.loaded?w.data:{page_id:void 0,item_type:void 0,author_id:null==k?void 0:null===(e=k.instance)|| void 0===e?void 0:null===(f=e.details)|| void 0===f?void 0:f.author_id,collection_id:null==k?void 0:null===(g=k.instance)|| void 0===g?void 0:null===(h=g.details)|| void 0===h?void 0:h.collection_id},snapshotProperties:m.loaded?m.data:null,snapshotPropertiesLoading:!!m.loading,snapshotPropertiesLoaded:!!m.loaded,isVersions:(0,o.Z)(D.asPath),isPublished:null==k?void 0:k.is_published,comps:H,userInfo:null==t?void 0:t.data,userInfoLoaded:null==t?void 0:t.loaded,pageURL:I,isNonLessonPage:["/assessment","/project","/certificate","/cloudlab",].some(function(a){return I.endsWith(a)}),pathCompletion:z,moduleCategories:A,showSideBar:!C}},aq=function(a){return{setCollectionCompletion:function(b){var c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:function(a){};return(0,n.NJ)(b,c)(a)},reset:function(b,c,d,e){var f=arguments.length>4&& void 0!==arguments[4]?arguments[4]:function(a){};return(0,n.fy)(b,c,d,e,f)(a)},dispatch:a}},ar=(0,j.$j)(ap,aq),as=function(a){!function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&ad(a,b)}(g,a);var b,c,d=(b=g,c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,d,e,f,g=aa(b);if(c){var h=aa(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return d=this,(e=f)&&("object"==(a=e,a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof e)?e:Z(d)});function g(){!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,g),a=d.apply(this,arguments),a.state={cover_image:{},is_draft_page:!1,previousNextArticles:null,pageCompletionStatus:{completionLoaded:!1,completionLoading:!1,completionStatus:{},markAsCompleted:{},showCompletingLoader:!1},page_id:null,mobileViewToggle:!1,markAsCompleteLoading:!1,resetCourseCompletionLoading:!1,enterprisePreviousNextContent:null,purchasingFreeCollection:!1,lessonsVisited:0},a.defaultCustomizeFontCountdown=1200,a.customizeFontCountdown=a.defaultCustomizeFontCountdown,a.timerId=null,a.customizeFontCountdownStartTime=new Date,a.renderArticle=!1,a.handleTimer=function(){a.props.cookies.get("customizeFontCountdown")?0>=a.props.cookies.get("customizeFontCountdown")&&a.props.cookies.set("customizeFontCountdown",a.defaultCustomizeFontCountdown,{path:"/"}):a.props.cookies.set("customizeFontCountdown",a.defaultCustomizeFontCountdown,{path:"/"});var b=a.props.cookies.get("customizeFontCountdown");if(a.customizeFontCountdown=b,b>0){a.customizeFontCountdownStartTime=new Date;var c=setTimeout(function(){a.props.cookies.get("viewed_customize_fonts_feedback")||(a.customizeFontCountdown=0,a.props.cookies.set("viewed_customize_fonts_feedback",!0))},1e3*b);a.timerId=c}},a.courseCompletionCallback=function(){var b,c,d,e,f,g=arguments.length>0&& void 0!==arguments[0]?arguments[0]:null,h=a.props,i=h.collection,j=h.pageProps,k=null==i?void 0:null===(b=i.instance)|| void 0===b?void 0:null===(c=b.details)|| void 0===c?void 0:c.collection_id,l=null==i?void 0:null===(d=i.instance)|| void 0===d?void 0:null===(e=d.details)|| void 0===e?void 0:e.author_id,m=a.getPlanInfo(),n=null!==(f=null==g?void 0:g["CourseCompletion_".concat(l,"_").concat(k)])&& void 0!==f?f:a.setFakeLessons();a.setState({pageCompletionStatus:{markAsCompleted:ac(ab({},a.state.pageCompletionStatus.markAsCompleted),_({},j.page_id,!((null==m?void 0:m.isPlanLesson)||(null==m?void 0:m.isPlanModule))||a.getPageCompletionStatus(n)===y.x)),completionStatus:ac(ab({},a.state.pageCompletionStatus.completionStatus),_({},j.page_id,a.getPageCompletionStatus(n))),completionLoaded:!0,completionLoading:!1,showCompletingLoader:!1}})},a.updateLessonsVisited=function(){a.setState(function(a){return{lessonsVisited:a.lessonsVisited+1}})},a.manageCompletion=function(b){var c=b.loaderValue,d=b.onlyLoader,e=void 0!==d&&d,f=b.onlyMarkAsCompleted,g=void 0!==f&&f,h=b.pageId;return!!h&&a.setState(function(a){var b,d=null===(b=a.pageCompletionStatus.markAsCompleted)|| void 0===b?void 0:b[h];return{pageCompletionStatus:ab(ac(ab({},a.pageCompletionStatus),{showCompletingLoader:c}),e?g?{markAsCompleted:ac(ab({},a.pageCompletionStatus.markAsCompleted),_({},h,!d))}:{}:{markAsCompleted:ac(ab({},a.pageCompletionStatus.markAsCompleted),_({},h,!d)),completionStatus:ac(ab({},a.pageCompletionStatus.completionStatus),_({},h,d?y.b:y.x))})}})},a.onPageUnmount=function(){var b,c=(new Date-a.customizeFontCountdownStartTime)/1e3;null===(b=a.props.cookies)|| void 0===b||b.set("customizeFontCountdown",a.customizeFontCountdown-c,{path:"/"}),clearTimeout(a.timerId)},a.clearPageAction=function(){return a.props.isVersions?p.x.clear:q.m.clear},a.loggedInUser=function(){var b;return null===(b=a.props.userInfo)|| void 0===b?void 0:b.user_id},a.goBackToCollectionEditor=function(){var b=a.props.router.query.author_id,c=a.props.router.query.collection_id,d=a.props.router.query.page_id;a.props.isVersions?a.props.router.push("/pageeditor/".concat(b,"/").concat(c,"/").concat(d)):a.props.router.push("/collectioneditor/".concat(b,"/").concat(c))},a.getPageCompletionStatus=function(b){var c=a.props.pageProps.page_id;if(c){if(null==b?void 0:b.ALL_DONE)return y.x;var d=c.toString();if(({}).hasOwnProperty.call(b,d)){var e=b[d];if(e&&e.length>1&&!isNaN(Date.parse(e)))return y.x}}return y.b},a.setPageCompletionStatus=function(b,c){var d=a.props.pageProps,e=d.author_id,f=d.collection_id,g=d.page_id,h=d.work_type,i=a.props,j=i.collection,m=i.pathCompletion,o=i.router,p=i.userInfo,q=i.moduleCategories,r=i.isPrivateContent,s=i.isPath,t=h===k.dLO.COLLECTION,u=(null==j?void 0:null===(T=j.instance)|| void 0===T?void 0:T.owned_by_reader)||!(null==j?void 0:null===(U=j.instance)|| void 0===U?void 0:null===(V=U.details)|| void 0===V?void 0:V.is_priced),v=(null==p?void 0:p.user_id)===e,w=null==j?void 0:null===(W=j.instance)|| void 0===W?void 0:W.details,x=w.path_id,A=w.path_author_id||e,B="".concat(g),C=new Date().toString(),D=b===y.x?C:null,E=null==w?void 0:null===(X=w.toc)|| void 0===X?void 0:X.categories,F=(null===(Y=a.props.courseCompletion)|| void 0===Y?void 0:Y["CourseCompletion_".concat(e,"_").concat(f)])||{},G=ac(ab({},F),(_(ao={},B,D),_(ao,"ALL_DONE",b===y.b?null:F.ALL_DONE),ao)),J=(0,I.Z)(null==o?void 0:o.asPath),K=(0,l.Z)((0,z.QO)(E,r).mandatoryLessons,G).percentCompleted,L=100===K,M=!!(null==p?void 0:null===(Z=p.enterprise)|| void 0===Z?void 0:null===($=Z.organizations)|| void 0===$?void 0:null===(aa=$.find)|| void 0===aa?void 0:aa.call($,function(a){return a.has_active_trial})),N=(_(ap={},B,D),_(ap,"resumable",u&&!v&&!L),ap);N.ALL_DONE=L?C:null;var O={},P=!!(null==j?void 0:null===(ad=j.instance)|| void 0===ad?void 0:ad.details.path_id)&&!!(null==j?void 0:null===(ae=j.instance)|| void 0===ae?void 0:ae.details.path_author_id)&&(null==j?void 0:null===(af=j.instance)|| void 0===af?void 0:af.details.work_type)===k.dLO.COLLECTION;(null==j?void 0:null===(ag=j.instance)|| void 0===ag?void 0:null===(ah=ag.details)|| void 0===ah?void 0:ah.work_type)===k.dLO.COLLECTION&&L&&!P&&(0,H.qP)(H.f2.LEARNING_CONTENT_COMPLETION,H.bt.SUCCESS_COMPLETE_COURSE,null!==(aq=null==j?void 0:null===(ai=j.instance)|| void 0===ai?void 0:null===(aj=ai.details)|| void 0===aj?void 0:aj.url_slug)&& void 0!==aq?aq:"".concat(e,"_").concat(f)),J===k.dLO.MODULE?(O={resumable_work_id:x,resumable_work_author_id:A,module_id:f,author_id:e},P&&(O=ac(ab({},O),{has_external_work:"true"})),L&&(0,H.qP)(H.f2.ENTERPRISE,H.bt.CLICKED_COMPLETED_MODULE,"",null,{trial_active:M,content_id:"".concat(e,"-").concat(f),is_assigned:!(null==j?void 0:null===(ar=j.instance)|| void 0===ar?void 0:null===(as=ar.details)|| void 0===as?void 0:as.is_assigned)})):O={resumable_work_id:f,resumable_work_author_id:e,author_id:e};var R={author_id:e,collection_id:f,payload:N,workType:P?k.dLO.MODULE:null==j?void 0:null===(ak=j.instance)|| void 0===ak?void 0:ak.details.work_type};a.props.dispatch((0,n.hy)(R,O,function(){return a.setState(function(a){return{pageCompletionStatus:ac(ab({},a.pageCompletionStatus),{completionStatus:ac(ab({},a.pageCompletionStatus.completionStatus),_({},c,b))})}},function(){return a.manageCompletion({onlyLoader:!0,onlyMarkAsCompleted:!0,loaderValue:!1,pageId:c})})},function(b){return a.updatePathCompletionMaps(b,B,s,m.loaded,m.loading,D)}));var S=a.getPlanInfo();if((S.isPlanModule||S.isPlanLesson||s)&&Object.keys(null!==(at=q.data)&& void 0!==at?at:{}).length&&Object.keys(null!==(au=null===(al=m.data)|| void 0===al?void 0:al.maps)&& void 0!==au?au:{}).length){var T,U,V,W,X,Y,Z,$,aa,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax=q.data,ay=(ax.planTitle,function(a,b){if(null==a)return{};var c,d,e=function a(b,c){if(null==b)return{};var d,e,f={},g=Object.keys(b);for(e=0;e<g.length;e++)d=g[e],c.indexOf(d)>=0||(f[d]=b[d]);return f}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(ax,["planTitle"])),az=ac(ab({},m.data.maps),_({},"CourseCompletion_".concat(e,"_").concat(f),ac(ab({},m.data.maps["CourseCompletion_".concat(e,"_").concat(f)]),_({},"".concat(g),b===y.b?null:new Date().toString()))));100===(0,Q.sanitizePathCompletionMaps)(az,q.data,(0,Q.getWorkToTotalLessonsMapping)(ay),null===(av=q.data)|| void 0===av?void 0:av.optionalItems,null===(aw=q.data)|| void 0===aw?void 0:aw.optionalItemsCount).completionPercentage&&(0,H.qP)(H.f2.ONBOARDING,H.bt.PLAN_COMPLETED)}else!(S.isPlanModule||S.isPlanLesson)&&L&&J!==k.dLO.MODULE&&(0,H.qP)(H.f2.ENTERPRISE,t?H.bt.CLICKED_COMPLETED_COURSE:H.bt.CLICKED_COMPLETED_SKILL_PATH,"",null,{trial_active:M,content_id:"".concat(e,"-").concat(f),is_assigned:!!(null==j?void 0:null===(am=j.instance)|| void 0===am?void 0:null===(an=am.details)|| void 0===an?void 0:an.is_assigned)})},a.logWidgetInteraction=function(b){return function(c){return function(d){return function(e){var f,g,h,i,j,l=a.props,m=l.collection,o=l.pageProps,p=l.router,q=o.author_id,r=o.collection_id,s=o.page_id,t=o.external_author_id,u=o.external_collection_id,v=o.external_page_id,w=(0,I.Z)(p.asPath)===k.dLO.MODULE&&(null==m?void 0:null===(f=m.instance)|| void 0===f?void 0:f.details.work_type)===k.dLO.COLLECTION;if(!q)return setTimeout(function(){return a.logWidgetInteraction(b)(c)(d)(e)},3e3);var x={author_id:v?t:q,collection_id:v?u:r,page_id:s,is_draft_page:b,comp_id:c,comp_type:d,interaction_map:JSON.stringify(e),path_author_id:w?null==m?void 0:null===(g=m.instance)|| void 0===g?void 0:g.details.path_author_id:Number(null==m?void 0:null===(h=m.instance)|| void 0===h?void 0:h.details.author_id),path_id:w?null==m?void 0:null===(i=m.instance)|| void 0===i?void 0:i.details.path_id:Number(null==m?void 0:null===(j=m.instance)|| void 0===j?void 0:j.details.collection_id)};return a.props.dispatch((0,n.sn)(x))}}}},a.resetCollectionCompletionStatus=function(b,c){var d,e,f,g,h,i,j=a.props,l=j.collection,m=j.pageProps,n=j.pathCompletion,o=m.author_id,p=!!(null==l?void 0:null===(d=l.instance)|| void 0===d?void 0:d.details.path_id)&&!!(null==l?void 0:null===(e=l.instance)|| void 0===e?void 0:e.details.path_author_id)&&(null==l?void 0:null===(f=l.instance)|| void 0===f?void 0:f.details.work_type)===k.dLO.COLLECTION,q=(null==l?void 0:null===(g=l.instance)|| void 0===g?void 0:null===(h=g.details)|| void 0===h?void 0:h.is_plan)||(null==l?void 0:null===(i=l.instance)|| void 0===i?void 0:i.details.is_parent_plan);a.props.dispatch(E.n.show(w.zN,{onConfirm:function(){var d,e;a.setState({resetCourseCompletionLoading:!0}),a.props.reset(ac(ab({},m),{resumable_work_author_id:(null==l?void 0:null===(d=l.instance)|| void 0===d?void 0:d.details.path_author_id)||o,workType:p?k.dLO.MODULE:null==l?void 0:null===(e=l.instance)|| void 0===e?void 0:e.details.work_type}),b,c,p,function(b){a.setState(function(a){return{resetCourseCompletionLoading:!1,pageCompletionStatus:ac(ab({},a.pageCompletionStatus),{completionStatus:{}})}}),a.updatePathCompletionMaps(b,"ALL_DONE",q,n.loaded,n.loading,null)})()},cancelText:"Cancel",confirmText:"Reset",title:"Warning",description:"Resetting will set the course completion percentage to zero. This will not reset your saved changes e.g. code in the lessons."}))},a.updateOwnerShip=null;var a,b,c=Z(a);return a.purchaseFreeCollection=(b=e().mark(function a(){var b,d,f,g,h,i,j,k,l,n,o,p,q,r,s,t,u,v;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(h=(g=c.props).collection,i=g.userInfo,j=g.router,k=g.dispatch,l=(null===(b=h.instance)|| void 0===b?void 0:b.details.price)===0||(null===(d=h.instance)|| void 0===d?void 0:d.details.discounted_price)===0,n=null===(f=h.instance)|| void 0===f?void 0:f.owned_by_reader,!(c.loggedInUser()&&l&&!n&&!c.state.purchasingFreeCollection)){a.next=17;break}if(o=null==i?void 0:i.is_user_subscribed){a.next=16;break}return r=null===(p=h.instance)|| void 0===p?void 0:p.details.author_id,s=null===(q=h.instance)|| void 0===q?void 0:q.details.collection_id,c.setState({purchasingFreeCollection:!0}),(0,H.qP)(H.f2.BUY,H.bt.BUY_INIT_COURSE_HOME),t=(0,V.We)(),u=(0,V.bB)(),v=ab({checkout_type:X.vl.COURSE_PURCHASE,author_id:r,work_id:s,expected_price:0,last_referral_site:(0,U.rT)(),referral_site:(0,U.Ar)(),is_zero_priced_course_buy:!0,work_type:"collection"},t,u),a.abrupt("return",k((0,W.eJ)(v)).then(function(){k((0,m.Ae)()),c.updateOwnerShip=function(){k((0,m.Ae)())}}).catch(function(a){var b;c.props.dispatch(E.n.show(w.ad,{status:"ERROR",text:null===(b=a.responseJSON)|| void 0===b?void 0:b.errorText})),c.setState({purchasingFreeCollection:!1}),j.push(j.query.course_url_slug?"/courses/".concat(j.query.course_url_slug):"/collection/".concat(j.query.author_id,"/").concat(j.query.collection_id))}));case 16:k((0,m.Ae)());case 17:case"end":return a.stop()}},a)}),function(){var a=this,c=arguments;return new Promise(function(d,e){var f=b.apply(a,c);function g(a){$(f,d,e,g,h,"next",a)}function h(a){$(f,d,e,g,h,"throw",a)}g(void 0)})}),a.setCollectionCompletionStatus=function(){var b,c,d,e,f,g,h,i,j,l,m=arguments.length>0&& void 0!==arguments[0]?arguments[0]:null,n=a.props,o=n.pathCompletion,p=n.setCollectionCompletion,q=n.userInfo,r=n.collection,s=a.props.pageProps,t=s.author_id,u=s.collection_id,v=!!(null==r?void 0:null===(b=r.instance)|| void 0===b?void 0:b.details.path_id)&&!!(null==r?void 0:null===(c=r.instance)|| void 0===c?void 0:c.details.path_author_id)&&(null==r?void 0:null===(d=r.instance)|| void 0===d?void 0:d.details.work_type)===k.dLO.COLLECTION,x={ALL_DONE:new Date().toString(),resumable:!1,resumable_work_id:null!=m?m:u,resumable_work_author_id:(null==r?void 0:null===(e=r.instance)|| void 0===e?void 0:e.details.path_author_id)||t,author_id:t};m&&(x=v?Object.assign({},x,{module_id:u,has_external_work:(!0).toString()}):Object.assign({},x,{module_id:u}));var y={author_id:t,collection_id:u,payload:x,workType:v?k.dLO.MODULE:null==r?void 0:null===(f=r.instance)|| void 0===f?void 0:f.details.work_type},z=null==r?void 0:null===(g=r.instance)|| void 0===g?void 0:g.owned_by_reader,A=null==r?void 0:null===(h=r.instance)|| void 0===h?void 0:h.details,B=!!q&&q.user_id===t,C=(null==r?void 0:null===(i=r.instance)|| void 0===i?void 0:null===(j=i.details)|| void 0===j?void 0:j.is_plan)||(null==r?void 0:null===(l=r.instance)|| void 0===l?void 0:l.details.is_parent_plan);(null==q?void 0:q.user_id)&&(A.is_priced&&z||!A.is_priced||B)&&a.props.dispatch(E.n.show(w.zN,{onConfirm:function(){var b,c,d,e,f;a.setState({markAsCompleteLoading:!0}),p(y,function(b){a.setState({markAsCompleteLoading:!1}),a.updatePathCompletionMaps(b,"ALL_DONE",C,o.loaded,o.loading,new Date().toString())})(),(null==r?void 0:null===(b=r.instance)|| void 0===b?void 0:null===(c=b.details)|| void 0===c?void 0:c.work_type)!==k.dLO.COLLECTION||v||(0,H.qP)(H.f2.LEARNING_CONTENT_COMPLETION,H.bt.SUCCESS_COMPLETE_COURSE,null!==(f=null==r?void 0:null===(d=r.instance)|| void 0===d?void 0:null===(e=d.details)|| void 0===e?void 0:e.url_slug)&& void 0!==f?f:"".concat(t,"_").concat(u))},cancelText:"Cancel",confirmText:"Complete",title:"Confirmation",description:"Are you sure you want to mark this course as 100% completed?"}))},a.setFakeLessons=function(){var b=a.props.collection;if(Object.keys(b).length){var c,d=null===(c=b.instance)|| void 0===c?void 0:c.details.page_titles;if(d)return Object.keys(d).reduce(function(a,b){return ac(ab({},a),_({},b,null))},{})}return{}},a.handleClaimCertificateLocal=function(){var b,c,d;return(0,K.Z)(null===(b=a.props.collection.instance)|| void 0===b?void 0:b.details.author_id,null===(c=a.props.collection.instance)|| void 0===c?void 0:c.details.collection_id,a.props.router,null===(d=a.props.collection.instance)|| void 0===d?void 0:d.details.work_type)},a.buyCertificateLocal=function(){return(0,K.l)(a.props.collection,a.props.router)},a.getPathShot=function(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=a[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=!0,j=!1,l=void 0;try{for(var m,n=h.pages[Symbol.iterator]();!(i=(m=n.next()).done);i=!0){var o=m.value;if(b&&o.id.toString()===b&&o.type===k.RIu.SHOT)return o}}catch(p){j=!0,l=p}finally{try{i||null==n.return||n.return()}finally{if(j)throw l}}}}catch(q){d=!0,e=q}finally{try{c||null==g.return||g.return()}finally{if(d)throw e}}return null},a.getSelections=function(b,c,d,e,f,g,h){var i,j,k=a.props,l=k.dispatch,m=k.collection,n=k.router,o=n.query,p=null==m?void 0:m.is_guide,q=!o.encodedPathInfo&&!!(null==m?void 0:null===(i=m.instance)|| void 0===i?void 0:null===(j=i.details)|| void 0===j?void 0:j.is_standalone_module);l(E.n.show(w.dq,{result:b,categories:c,collectionId:d,authorId:e,url_slug:f,pathId:g,pathAuthorId:h,navigateToHighlight:R.Gj,isStandaloneModule:q,collectionIsGuide:p})),(0,H.qP)(H.f2.COURSE,H.bt.VIEW_USER_HIGHLIGHTS,"OPEN")},a.onNotesClick=function(){var b,c,d,e,f,g=a.props,h=g.collection,i=g.router,j=h.collectionId,l=h.authorId,m=null==h?void 0:null===(b=h.instance)|| void 0===b?void 0:b.details.path_id,n=null==h?void 0:null===(c=h.instance)|| void 0===c?void 0:c.details.path_author_id,o=null==h?void 0:null===(d=h.instance)|| void 0===d?void 0:d.details.url_slug,p=(null===(f=null==h?void 0:null===(e=h.instance)|| void 0===e?void 0:e.details.toc)|| void 0===f?void 0:f.categories)||[],q=null==p?void 0:p.reduce(function(a,b){return a.concat(b.pages.reduce(function(a,b){return a.concat([k.RIu.LESSON,k.RIu.SHOT].includes(null==b?void 0:b.type)?[ab({},b.type===k.RIu.LESSON?{author_id:b.author_id,collection_id:b.collection_id,page_id:b.page_id}:{shot_id:b.page_id}),]:[])},[]))},[]);a.promise=(0,J.vu)(j,(0,I.Z)(null==i?void 0:i.asPath),{external_lessons_data:JSON.stringify(q)}).then(JSON.parse).then(function(b){return a.getSelections(b,p,j,l,o,m,n)})},a.handleSaveWidgetUserData=function(b,c){var d=c.compId,e=c.reset,f=arguments.length>2&& void 0!==arguments[2]?arguments[2]:null,g=a.props,h=g.userInfo,i=g.router,j=g.pageProps,k=g.collection,l=g.comps,m=g.dispatch;return(0,R.uN)(b,d,e,null==h?void 0:h.user_id,i,j,k,l,m,f)},a.getPlanInfo=function(){var b,c,d,e;return{isPlanLesson:null===(b=a.props.collection||a.props.ssrContent)|| void 0===b?void 0:null===(c=b.instance)|| void 0===c?void 0:c.details.is_plan,isPlanModule:null===(d=a.props.collection||a.props.ssrContent)|| void 0===d?void 0:null===(e=d.instance)|| void 0===e?void 0:e.details.is_parent_plan}},a.updatePathCompletionMaps=function(b,c,d,e,f,g){return d&&!b&&e&&!f&&a.props.dispatch(S.J.updateMap({authorId:String(a.props.pageProps.author_id),collectionId:String(a.props.pageProps.collection_id),key:c,value:g}))},a}var h=g.prototype;return h.componentDidMount=function(){var a,b,c,d,e,f,g,h,i,j=this;(null===(a=this.props.userInfo)|| void 0===a?void 0:a.user_id)&&!(null===(b=this.props.userInfo)|| void 0===b?void 0:b.viewed_customize_fonts_feedback)&&window.addEventListener("beforeunload",this.onPageUnmount);var l=this.props.router.query,o=this.props,p=o.isVersions,q=o.router,r=ac(ab({},l),{redirect_info:{collection_title:null===(c=this.props.meta)|| void 0===c?void 0:c.title,default_redirect:null===(d=this.props.meta)|| void 0===d?void 0:d.deleted_course_lesson_redirect,additional_course_alternatives:null===(e=this.props.meta)|| void 0===e?void 0:e.additional_course_alternatives,transition_page_title:null===(f=this.props.meta)|| void 0===f?void 0:f.transition_page_title,page_titles:null===(g=this.props.meta)|| void 0===g?void 0:g.page_titles,is_redirectable:null===(h=this.props.meta)|| void 0===h?void 0:h.is_redirectable},meta:this.props.meta,is_draft_page:this.state.is_draft_page||p});(null===(i=q.asPath)|| void 0===i?void 0:i.lastIndexOf("/preview"))!== -1&&q.replace(q.asPath.replace("/preview","")),!Object.keys(this.props.collection).length&&Object.keys(l).length?(this.props.dispatch((0,m._N)({params:r,router:q,disableAllRedirections:this.props.disableAllRedirections})).then(function(){var a,b,c,d,e=j.props,f=e.collection,g=e.pageProps;j.purchaseFreeCollection();var h=!!g.page_id||j.props.isNonLessonPage,i=null==f?void 0:null===(a=f.instance)|| void 0===a?void 0:a.details.collection_id,m=null==f?void 0:null===(b=f.instance)|| void 0===b?void 0:b.details.author_id,o=null==f?void 0:null===(c=f.instance)|| void 0===c?void 0:null===(d=c.details)|| void 0===d?void 0:d.collection_type;j.loggedInUser()&&Object.keys(f).length&&h&&o!==k.dLO.SKILL_ASSESSMENT&&!(j.state.pageCompletionStatus.completionLoaded||j.state.pageCompletionStatus.completionLoading)&&j.setState(function(a){return{pageCompletionStatus:ac(ab({},a.pageCompletionStatus),{completionLoading:!0})}},function(){return j.props.dispatch((0,n.Os)(ac(ab({},l),{author_id:m,collection_id:i,callback:j.courseCompletionCallback})))})}),this.renderArticle=!0):Object.keys(this.props.collection).length&&this.purchaseFreeCollection()},h.componentDidUpdate=function(a){var b=this,c=this.props,d=c.collection,e=c.userInfo,f=c.router,g=c.pageProps,h=c.loader,i=c.isPrivateContent,j=parseInt(f.query.author_id)||(null==d?void 0:null===(l=d.instance)|| void 0===l?void 0:null===(o=l.details)|| void 0===o?void 0:o.author_id);if((null===(p=a.collection.instance)|| void 0===p?void 0:p.owned_by_reader)!==(null===(q=d.instance)|| void 0===q?void 0:q.owned_by_reader)&&this.purchaseFreeCollection(),!this.updateOwnerShip||!h.isLoaded||h.isLoading||(null===(r=d.instance)|| void 0===r?void 0:r.owned_by_reader)||(this.updateOwnerShip(),this.updateOwnerShip=null),g.page_id!==a.pageProps.page_id&&g.page_id){var l,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=function(a,b,c,d,e,f){if(!Object.keys(a).length)return null;var g=(null==a?void 0:a.instance)||{},h=g.details||{},i=!(h.is_priced&&h.price&&h.discounted_price),j=h.toc||{},l=h.page_titles||[],m=j.categories||[],n=!!d&&d.user_id===c,o=!1,p=null;g.owned_by_reader||e||!h.is_priced||n||f||(o=!0,p={title:h.title,is_priced:h.is_priced,price:h.price,discounted_price:h.discounted_price,discounted_for_region:h.discounted_for_region||null});var q=m.reduce(function(a,b){return b.type===k.j1J.ASSESSMENT||b.type===k.j1J.PROJECT||b.type===k.j1J.CLOUD_LAB||b.type===k.j1J.EXTERNAL_ASSESSMENT||b.type===k.j1J.EXTERNAL_PROJECT?a.concat(b):a.concat(b.pages)},[]),r=q.findIndex(function(a){return a.id===b});if(r<0)return null;var s=void 0===q[r].is_lesson|| !0===q[r].is_lesson,t=null,u=null;g.owned_by_reader||i||(t=ao(r,q,l,!0),u=ao(r,q,l,!1));var v=null,w=null;return 0===r?(q.length>1&&(v={id:am(q[r+1].type)?q[r+1].page_id:q[r+1].id,title:l[q[r+1].id]||q[r+1].title,type:q[r+1].type,showPreviewLink:!!o&&!q[r+1].is_preview,author_id:q[r+1].author_id,collection_id:q[r+1].collection_id}),{previous:null,next:t||v,collection_meta:p,is_current_page_lesson:s}):r===q.length-1?(w={id:am(q[r-1].type)?q[r-1].page_id:q[r-1].id,title:l[q[r-1].id]||q[r-1].title,type:q[r-1].type,showPreviewLink:!!o&&!q[r-1].is_preview,author_id:q[r-1].author_id,collection_id:q[r-1].collection_id},{previous:u||w,next:null,type:q[r].type,collection_meta:p,is_current_page_lesson:s}):{previous:u||{id:am(q[r-1].type)?q[r-1].page_id:q[r-1].id,title:l[q[r-1].id]||q[r-1].title,type:q[r-1].type,showPreviewLink:!!o&&!q[r-1].is_preview,author_id:q[r-1].author_id,collection_id:q[r-1].collection_id},next:t||{id:am(q[r+1].type)?q[r+1].page_id:q[r+1].id,title:l[q[r+1].id]||q[r+1].title,type:q[r+1].type,showPreviewLink:!!o&&!q[r+1].is_preview,author_id:q[r+1].author_id,collection_id:q[r+1].collection_id},collection_meta:p,is_current_page_lesson:s}}(d,g.page_id,j,e,this.state.is_draft_page,this.props.isVersions);this.setState(ab({previousNextArticles:H},i?{enterprisePreviousNextContent:an(d,g.page_id,f,!!(null===(G=this.getPlanInfo())|| void 0===G?void 0:G.isPlanModule))}:{}))}var I=this.props.router.query,J=null==d?void 0:null===(s=d.instance)|| void 0===s?void 0:null===(t=s.details)|| void 0===t?void 0:t.collection_id,K=null===(u=this.props.collection)|| void 0===u?void 0:null===(v=u.instance)|| void 0===v?void 0:null===(w=v.details)|| void 0===w?void 0:w.collection_type;this.loggedInUser()&&Object.keys(d).length&&((null===(x=a.userInfo)|| void 0===x?void 0:x.user_id)!==(null==e?void 0:e.user_id)||g.page_id!==a.pageProps.page_id)&&g.page_id&&K!==k.dLO.SKILL_ASSESSMENT&&!this.state.pageCompletionStatus.completionLoading&&this.setState(function(a){return{pageCompletionStatus:ac(ab({},a.pageCompletionStatus),{completionLoading:!0,completionLoaded:!1})}},function(){return b.props.dispatch((0,n.Os)(ac(ab({},I),{author_id:j,collection_id:J,callback:b.courseCompletionCallback})))});var M=ac(ab({},I),{redirect_info:{collection_title:null===(y=this.props.meta)|| void 0===y?void 0:y.title,default_redirect:null===(z=this.props.meta)|| void 0===z?void 0:z.deleted_course_lesson_redirect,page_titles:null===(A=this.props.meta)|| void 0===A?void 0:A.page_titles,additional_course_alternatives:null===(B=this.props.meta)|| void 0===B?void 0:B.additional_course_alternatives,transition_page_title:null===(C=this.props.meta)|| void 0===C?void 0:C.transition_page_title,is_redirectable:null===(D=this.props.meta)|| void 0===D?void 0:D.is_redirectable},meta:this.props.meta,is_draft_page:this.state.is_draft_page||this.props.isVersions}),N=null===(E=this.props.collection)|| void 0===E?void 0:null===(F=E.instance)|| void 0===F?void 0:F.details,O=I.courseUrlSlug?(null==N?void 0:N.url_slug)!==I.courseUrlSlug:(null==N?void 0:N.author_id)!==I.authorId||(null==N?void 0:N.collection_id)!==I.collectionId;Object.keys(a.collection).length>0&&0===Object.keys(this.props.collection).length&&Object.keys(I).length?(this.props.dispatch((0,m._N)({params:M,router:f,disableAllRedirections:this.props.disableAllRedirections})).then(function(){var a,c,d,e,f,g,h=b.props.collection,i=null==h?void 0:null===(a=h.instance)|| void 0===a?void 0:null===(c=a.details)|| void 0===c?void 0:c.collection_id,j=null==h?void 0:null===(d=h.instance)|| void 0===d?void 0:null===(e=d.details)|| void 0===e?void 0:e.author_id,l=null==h?void 0:null===(f=h.instance)|| void 0===f?void 0:null===(g=f.details)|| void 0===g?void 0:g.collection_type;b.loggedInUser()&&Object.keys(h).length&&b.props.isNonLessonPage&&l!==k.dLO.SKILL_ASSESSMENT&&!(b.state.pageCompletionStatus.completionLoaded||b.state.pageCompletionStatus.completionLoading)&&b.setState(function(a){return{pageCompletionStatus:ac(ab({},a.pageCompletionStatus),{completionLoading:!0})}},function(){return b.props.dispatch((0,n.Os)(ac(ab({},I),{author_id:j,collection_id:i,callback:b.courseCompletionCallback})))})}),this.renderArticle=!0):N&&O&&this.props.dispatch((0,m.l3)());var P=null==N?void 0:N.url_slug,Q=!!(null==N?void 0:N.is_global)||I.encodedPathInfo&&!!(null==N?void 0:N.is_standalone_module),R=String(null==N?void 0:N.path_author_id),S=String(null==N?void 0:N.path_id),T=!this.props.moduleCategories.loaded&&!this.props.moduleCategories.loading;Object.keys(this.props.collection).length>0&&T&&(String(J)===this.props.router.query.collection_id&&String(j)===this.props.router.query.author_id||P===this.props.router.query.course_url_slug)&&Q&&I.encodedPathInfo&&this.props.dispatch(L.W.load(R,S,!1,!1,null))},h.componentWillUnmount=function(){var a,b;(null===(a=this.props.userInfo)|| void 0===a?void 0:a.user_id)&&!(null===(b=this.props.userInfo)|| void 0===b?void 0:b.viewed_customize_fonts_feedback)&&window.removeEventListener("beforeunload",this.onPageUnmount),this.props.dispatch((0,m.l3)()),this.props.dispatch(F._.clear()),this.props.dispatch(M.R.hide(N.Z.DEPRECATED_CONTENT_BANNER))},h.getFetchPageAction=function(){return this.props.isVersions?p.x.load:q.m.load},h.render=function(){var a,b,c,d,e,g,h,i,j,m,n,p,q,r,s,t,w,y,B,D,E,F,G,H,J,K,L,M,N,P,Q,S,U,V,W,X,Z,$,_,aa,ad,am,an,ao,ap,aq=this,ar=this.props,as=ar.isVersions,at=ar.isMobileAgent,au=ar.isNewOnboardingEditor,av=ar.isPrivateContent,aw=this.props.pageProps,ax=aw.author_id,ay=aw.collection_id,az=aw.page_id,aA=this.state,aB=aA.markAsCompleteLoading,aC=aA.enterprisePreviousNextContent,aD=aA.previousNextArticles,aE=aA.pageCompletionStatus,aF=aA.resetCourseCompletionLoading,aG=this.props,aH=aG.collection,aI=aG.userInfo,aJ=aG.userInfoLoaded,aK=aG.dispatch,aL=aG.showSideBar,aM=aG.snapshotProperties,aN=aG.snapshotPropertiesLoading,aO=aG.snapshotPropertiesLoaded,aP=aG.pageURL,aQ=aG.router,aR=aQ.query,aS=null==aH?void 0:null===(a=aH.instance)|| void 0===a?void 0:null===(b=a.details)|| void 0===b?void 0:b.CodeThemes,aT=aS?{Code:null==aH?void 0:null===(c=aH.instance)|| void 0===c?void 0:null===(d=c.details)|| void 0===d?void 0:null===(e=d.CodeThemes)|| void 0===e?void 0:e.Code,Markdown:null==aH?void 0:null===(g=aH.instance)|| void 0===g?void 0:null===(h=g.details)|| void 0===h?void 0:null===(i=h.CodeThemes)|| void 0===i?void 0:i.Markdown,RunJS:null==aH?void 0:null===(j=aH.instance)|| void 0===j?void 0:null===(m=j.details)|| void 0===m?void 0:null===(n=m.CodeThemes)|| void 0===n?void 0:n.RunJS,SPA:null==aH?void 0:null===(p=aH.instance)|| void 0===p?void 0:null===(q=p.details)|| void 0===q?void 0:null===(r=q.CodeThemes)|| void 0===r?void 0:r.SPA,isForced:null!==(W=null==aH?void 0:null===(s=aH.instance)|| void 0===s?void 0:null===(t=s.details)|| void 0===t?void 0:null===(w=t.CodeThemes)|| void 0===w?void 0:w.isForced)&& void 0!==W?W:x.Z}:{},aU=(null===(B=null==aH?void 0:null===(y=aH.instance)|| void 0===y?void 0:y.details.toc)|| void 0===B?void 0:B.categories)||[],aV=(0,z.QO)(aU).mandatoryLessons,aW=!aR.encodedPathInfo&&!!(null==aH?void 0:null===(D=aH.instance)|| void 0===D?void 0:null===(E=D.details)|| void 0===E?void 0:E.is_standalone_module),aX=null==aH?void 0:null===(F=aH.instance)|| void 0===F?void 0:null===(G=F.details)|| void 0===G?void 0:G.collaboration_mode,aY="review"===aX,aZ=(0,l.Z)(aV,null==aH?void 0:aH.course_completion).percentCompleted,a$=this.getPlanInfo(),a_={userInfo:aI,userInfoLoaded:aJ,canToggleSidebar:!0,fetchPageAction:this.getFetchPageAction(),clearPageAction:this.clearPageAction(),previousNextArticles:aD&&ab(ac(ab({},aD),{setCompletion:this.setPageCompletionStatus,manageCompletion:this.manageCompletion}),aE),enterprisePreviousNextContent:aC,default_themes:aT,collapsed:aL,pageTitle:null===(H=this.props.collection)|| void 0===H?void 0:null===(J=H.instance)|| void 0===J?void 0:null===(K=J.details)|| void 0===K?void 0:null===(L=K.page_titles)|| void 0===L?void 0:L[null==az?void 0:az.toString()],logWidgetInteraction:this.logWidgetInteraction,collectionSideBarVisible:aL,isInReviewerMode:aY,buyCertificate:this.buyCertificateLocal,handleClaimCertificate:this.handleClaimCertificateLocal,onNotesClick:this.onNotesClick,navigateToHighlight:function(a){(0,R.Gj)(aR,a),delete aR.scrollParams},handleSaveWidgetUserData:this.handleSaveWidgetUserData,planInfo:a$},a0=(aQ.asPath.startsWith("/modules/page")||aQ.asPath.startsWith("/module/page")||aQ.asPath.startsWith("/plan/page"))&&aQ.asPath.endsWith("/template");if(!Object.keys(aH).length||!this.renderArticle)return null;var a1={collapsed:aL,collection_id:ay,dispatch:aK,page_id:az},a2=null==aH?void 0:null===(M=aH.instance)|| void 0===M?void 0:null===(N=M.details)|| void 0===N?void 0:N.is_priced,a3=null==aH?void 0:null===(P=aH.instance)|| void 0===P?void 0:P.owned_by_reader,a4=!!aI&&aI.user_id===ax,a5=a_.pageTitle;aO?a5=(null==aM?void 0:aM.title)||"":aN&&(a5="");var a6=new C.Z,a7=null==aH?void 0:null===(Q=aH.instance)|| void 0===Q?void 0:null===(S=Q.details)|| void 0===S?void 0:S.collection_type,a8=aU.some(function(a){return a.pages.some(function(a){return(aR.page_id?a.id.toString()===aR.page_id:a6.encode(a.id)===aR.page_url_slug)&&a.is_preview})}),a9=(0,I.Z)(null==aQ?void 0:aQ.asPath),ba=a9===k.dLO.PATH&&aU.some(function(a){return[k.RIu.PATH_EXTERNAL_ASSESSMENT,k.RIu.PATH_EXTERNAL_PROJECT,].includes(a.type)}),bb=this.getPathShot(aU,aR.page_url_slug&&!aP.endsWith("/certificate")?a6.decode(aR.page_url_slug)[0].toString():aR.page_id),bc={};return(bb&&(bc=ac(ab({},a_),{shotId:bb.page_id,shotUrl:bb.url,authorId:ax,collectionId:ay,pageId:aR.page_id,workType:a9,isCollectionPriced:a2,isCollectionOwnedByReader:a3,isCollectionOwnedByAuthor:a4,percentCompleted:aZ,readerPreferences:this.props.readerPreferences,widgetsData:this.props.widgetsData})),(null===(U=this.props)|| void 0===U?void 0:null===(V=U.meta)|| void 0===V?void 0:V.is_marked_for_deletion)&&Object.keys(aH).length&&(0,R.NS)(null!=aH?aH:{},aZ))?(0,f.jsx)(Y.Z,{collectionTitle:null===(X=this.props.meta)|| void 0===X?void 0:X.name,defaultRedirect:null===(Z=this.props.meta)|| void 0===Z?void 0:Z.deleted_course_lesson_redirect,transitionPageTitle:null===($=this.props.meta)|| void 0===$?void 0:$.transition_page_title,courseAlternatives:null===(_=this.props.meta)|| void 0===_?void 0:_.additional_course_alternatives,pageTitles:null==aH?void 0:null===(aa=aH.instance)|| void 0===aa?void 0:aa.details.page_titles,isRedirectable:null===(ad=this.props.meta)|| void 0===ad?void 0:ad.is_redirectable}):((0,O.Wc)(this.props,!0),(0,f.jsxs)(f.Fragment,{children:[!a0&&!ba&&!at&&!a$.isPlanLesson&&!a$.isPlanModule&&!aQ.query.menteeId&&!av&&!(0,T.VF)(a7)&&!au&&(0,f.jsx)(v.Z,{contentLoading:null===(am=this.props.pageData)|| void 0===am?void 0:am.loading,isInReviewerMode:aY,markAsCompleteLoading:aB,resetCourseCompletionLoading:aF,resetCollectionCompletionStatus:this.resetCollectionCompletionStatus,setCollectionCompletionStatus:this.setCollectionCompletionStatus,isPrivateContent:this.props.isPrivateContent,useModularTypescale:!0}),(0,f.jsxs)("div",{className:"ed-grid-main major-second lg:minor-third learner-mode",children:[(0,f.jsx)(u,ac(ab({},a1),{children:bb?(0,f.jsx)(ak,ac(ab({},this.props,bc),{mode:"view",handleTimer:this.handleTimer,customizeFontCountdown:this.customizeFontCountdown,lessonsCompleted:this.state.lessonsCompleted,onLessonCompleted:this.onLessonCompleted,lessonsVisited:this.state.lessonsVisited,updateLessonsVisited:this.updateLessonsVisited})):aP.endsWith("/assessment")?(0,f.jsx)(ag,ac(ab({},this.props,a_),{mode:"view",type:k.sLn.COLLECTION,isCollectionPriced:a2,isCollectionOwnedByReader:a3,isCollectionOwnedByAuthor:a4,percentCompleted:aZ,useModularTypescale:!0})):aP.endsWith("/project")||this.props.isStandaloneProject?(0,f.jsx)(ah,ac(ab({},this.props,a_),{mode:"view",type:k.sLn.COLLECTION,isCollectionPriced:a2,isCollectionOwnedByReader:a3,isCollectionOwnedByAuthor:a4,percentCompleted:aZ,useModularTypescale:!0})):aP.endsWith("/cloudlab")?(0,f.jsx)(ai,ac(ab({},this.props,a_),{mode:"view",type:k.sLn.COLLECTION,isCollectionPriced:a2,isCollectionOwnedByReader:a3,isCollectionOwnedByAuthor:a4,percentCompleted:aZ})):aP.endsWith("/certificate")?(0,f.jsx)(aj,ac(ab({},this.props,a_),{percentCompleted:aZ})):(0,o.Z)(aQ.asPath)?(0,f.jsx)(ae,ac(ab({},this.props,a_),{pageTitle:a5,percentCompleted:aZ,showVersionHistory:!0,isCollectionPriced:a2,isCollectionOwnedByReader:a3,isCollectionOwnedByAuthor:a4,isTemplateView:a0,handleTimer:this.handleTimer,customizeFontCountdown:this.customizeFontCountdown,lessonsCompleted:this.state.lessonsCompleted,onLessonCompleted:this.onLessonCompleted,lessonsVisited:this.state.lessonsVisited,updateLessonsVisited:this.updateLessonsVisited})):!a3&&!a8&&a2&&["/collection/page/[authorId]/[collectionId]/[pageId]","/courses/[courseUrlSlug]/[pageUrlSlug]","/path/page/[authorId]/[collectionId]/[pageId]","/path/lesson/[courseUrlSlug]/[pageUrlSlug]","/module/page/[encodedPathInfo]/[authorId]/[collectionId]/[pageId]","/module/lesson/[courseUrlSlug]/[pageUrlSlug]","/modules/page/[authorId]/[collectionId]/[pageId]","/plan/page/[authorId]/[collectionId]/[pageId]",].includes(aQ.pathname)?(0,f.jsx)(af,ac(ab({},this.props,a_),{isCollectionPriced:a2,isCollectionOwnedByReader:a3,isCollectionOwnedByAuthor:a4,purchasingFreeCollection:this.state.purchasingFreeCollection,contentWidth:null===(an=this.props.readerPreferences)|| void 0===an?void 0:an.contentWidth})):["/collection/page/[authorId]/[collectionId]/[pageId]","/courses/[courseUrlSlug]/[pageUrlSlug]","/path/page/[authorId]/[collectionId]/[pageId]","/path/lesson/[courseUrlSlug]/[pageUrlSlug]","/module/page/[encodedPathInfo]/[authorId]/[collectionId]/[pageId]","/module/lesson/[courseUrlSlug]/[pageUrlSlug]","/modules/page/[authorId]/[collectionId]/[pageId]","/plan/page/[authorId]/[collectionId]/[pageId]","/plan/[planAuthorId]/[planId]/preview","/module/standalone/[moduleAuthorId]/[moduleId]/draft",].includes(aQ.pathname)&&(0,f.jsx)(ae,ac(ab({},this.props,a_),{mode:"view",percentCompleted:aZ,isCollectionPriced:a2,isCollectionOwnedByReader:a3,isCollectionOwnedByAuthor:a4,isStandaloneModule:aW,useModularTypescale:!0,isTemplateView:a0,handleTimer:this.handleTimer,customizeFontCountdown:this.customizeFontCountdown,lessonsCompleted:this.state.lessonsCompleted,onLessonCompleted:this.onLessonCompleted,lessonsVisited:this.state.lessonsVisited,updateLessonsVisited:this.updateLessonsVisited}))})),as&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(al,{}),(0,f.jsx)(A.Z,{authorId:parseInt(ax,10),collectionId:parseInt(ay,10),pageId:parseInt(this.props.pageProps.page_id,10),documentType:k.qen.COLLECTION_LESSON,workType:null==aH?void 0:null===(ao=aH.instance)|| void 0===ao?void 0:null===(ap=ao.details)|| void 0===ap?void 0:ap.work_type,wrappedComponentRef:function(a){return aq.versionHistorySidebar=a}})]})]})]}))},g}(g.Component);as.defaultProps={disableAllRedirections:!1};var at=(0,B.Z)((0,D.withRouter)((0,P.Z)(ar(as)))),au=ar(as)},31932:function(a,b,c){var d=c(20348),e=c(89703),f=c(10531),g=c(32084),h=c(57020);function i(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function j(a){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function k(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){i(a,b,c[b])})}return a}function l(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function m(a,b){return(m=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var n=function(a){return function(b){!function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&m(a,b)}(o,b);var c,e,n=(c=o,e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,b,d,f,g=j(c);if(e){var h=j(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return b=this,(d=f)&&("object"==(a=d,a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof d)?d:function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(b)});function o(){var a;return!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,o),a=n.apply(this,arguments),a.startTime=null,a.endTime=null,a.idleTime=0,a.allowTimeAddition=!1,a.intervalCounter=0,a.pageVisible=!0,a.intervalVariable=null,a.idleTimerRef=null,a.widgetTimes={},a.initializeAll=function(){a.startTime=null,a.endTime=null,a.idleTime=0,a.allowTimeAddition=!1,a.intervalCounter=0,a.pageVisible=!0,a.intervalVariable=null,a.widgetTimes={}},a.updateIdleTime=function(){a.allowTimeAddition&&a.idleTimerRef&&(a.idleTime+=Math.round(new Date().getTime()-a.idleTimerRef.getLastActiveTime()-a.idleTimerRef.props.timeout),a.allowTimeAddition=!1)},a.intervalCounterCB=function(){a.intervalCounter++},a.widgetIntervalCounterCB=function(b){return function(){return!!a.widgetTimes[b]&&a.widgetTimes[b].timeCounter++}},a.onActive=function(b){a.pageVisible&&(a.updateIdleTime(),a.initializeAllIntervals())},a.onIdle=function(b){a.allowTimeAddition=!0,a.clearAllIntervals()},a.initializeAllIntervals=function(){null===a.intervalVariable&&(a.intervalVariable=setInterval(a.intervalCounterCB,1e3)),Object.keys(a.widgetTimes).forEach(function(b){!a.widgetTimes[b].intervalVariable&&a.widgetTimes[b].inView&&(a.widgetTimes[b].intervalVariable=setInterval(a.widgetIntervalCounterCB(b),1e3))})},a.clearAllIntervals=function(){clearInterval(a.intervalVariable),a.intervalVariable=null,Object.keys(a.widgetTimes).forEach(function(b){clearInterval(a.widgetTimes[b].intervalVariable),a.widgetTimes[b].intervalVariable=null})},a.logPageTime=function(b,c,d,e,f){var g=arguments.length>5&& void 0!==arguments[5]?arguments[5]:null,j=arguments.length>6&& void 0!==arguments[6]?arguments[6]:null,k=arguments.length>7&& void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&& void 0!==arguments[8]?arguments[8]:null,m=arguments.length>9?arguments[9]:void 0,n=arguments.length>10&& void 0!==arguments[10]?arguments[10]:null;if(e&&(null==b?void 0:b.user_id)){var o="".concat(e),p=i({},o,{start_time:a.startTime,end_time:a.endTime,idle_time:a.idleTime,time_counter:a.intervalCounter,question_id:g,project_component_id:j,project_attempt_id:n});f((0,h.VY)({author_id:c,collection_id:d,payload:p,path_id:k,path_author_id:l,workType:m}))}},a.logWidgetsTime=function(b,c,d,e,f,g,j,m){var n=arguments.length>8&& void 0!==arguments[8]?arguments[8]:null,o=arguments.length>9&& void 0!==arguments[9]?arguments[9]:null;if(!e&&d){var p=Object.keys(a.widgetTimes).reduce(function(b,c){return l(k({},b),i({},c,{time_spent:Math.trunc(a.widgetTimes[c].timeCounter),type:a.widgetTimes[c].type}))},{}),q={author_id:b,collection_id:c,page_id:d,is_draft_page:e,interaction_map:JSON.stringify(p),path_id:g,path_author_id:j,workType:m,project_component_id:n,project_attempt_id:o};f((0,h.M1)(q))}},a.dispatchLogTime=function(b,c,d,e,f,g,h,i,j,k,l){var m=arguments.length>11&& void 0!==arguments[11]?arguments[11]:null;a.startTime&&(a.endTime=new Date().getTime(),a.updateIdleTime(),a.logPageTime(b,c,d,e,g,h,k,i,j,l,m),a.logWidgetsTime(c,d,e,f,g,i,j,l,k,m))},a.onPageMount=function(){a.initializeAll(),a.startTime=new Date().getTime(),a.initializeAllIntervals()},a.onPageUnmount=function(b,c,d,e,f,g){var h=arguments.length>6&& void 0!==arguments[6]?arguments[6]:void 0,i=arguments.length>7&& void 0!==arguments[7]?arguments[7]:void 0,j=arguments.length>8&& void 0!==arguments[8]?arguments[8]:void 0,k=arguments.length>9&& void 0!==arguments[9]?arguments[9]:void 0,l=arguments.length>10&& void 0!==arguments[10]?arguments[10]:void 0,m=arguments.length>11&& void 0!==arguments[11]?arguments[11]:void 0;return a.clearAllIntervals(),a.dispatchLogTime(b,c,d,e,f,g,h,j,k,i,l,m),!0},a.pageVisibilityChange=function(b){a.pageVisible=b,b?a.initializeAllIntervals():a.clearAllIntervals()},a.componentVisibilityChange=function(b,c,d){c in a.widgetTimes||(a.widgetTimes[c]={inView:b,type:d,timeCounter:0,intervalVariable:null}),a.widgetTimes[c].inView=b,b?a.widgetTimes[c].intervalVariable||(a.widgetTimes[c].intervalVariable=setInterval(a.widgetIntervalCounterCB(c),1e3)):(clearInterval(a.widgetTimes[c].intervalVariable),a.widgetTimes[c].intervalVariable=null)},a}return o.prototype.render=function(){var b=this;return(0,d.jsx)(g.Z,{onIdle:this.onIdle,onActive:this.onActive,debounce:250,timeout:3e4,ref:function(a){b.idleTimerRef=a},children:(0,d.jsx)(f.Z,{onChange:this.pageVisibilityChange,children:(0,d.jsx)(a,l(k({},this.props),{onPageMount:this.onPageMount,onPageUnmount:this.onPageUnmount,componentVisibilityChange:this.componentVisibilityChange}))})})},o}(e.Component)};b.Z=n}}])
//# sourceMappingURL=77237-5b3fbbf8dd6a7bfa.js.map